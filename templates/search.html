{% extends "base.html" %}

{% block extra_styles %}
<style type="text/css">
	body {
		background-color: #e9eaec;
	}

	.body {
		background-color: white;
		border-radius: 5px;
		padding-bottom: 20px;
		padding-top: 20px;
	}

	.fancy {
		font-family: "helvetica neue",aktiv-grotesk-std,helvetica,arial,freesans,"liberation sans","numbus sans l",sans-serif;
	}

	.btn-group-vertical {
		width: 100%;
	}

	/* Dear God pleae forgive me, but it just works if it's done this way */
	.btn-group-vertical .split-left {
		width: 80% !important;
		display: inline-block !important;
		float: left !important;
	}
	.btn-group-vertical .split-right {
		width: calc(20% + 1px) !important;
		display: inline-block !important;
		float: left !important;
		border-top-right-radius: 0px !important;
	}

	.body .media-object {
		width: 64px;
	}
</style>
{% endblock %}

{% block content %}
<div class="container">
	<h1 class="fancy text-center">Search results for "{{ query }}" in {{ category[0]|upper + category[1:] }}</h1>
	<div class="row">
		<div class="col-sm-2">
			<h3 class="text-center">Filter by</h3>
			<div class="btn-group-vertical">
				<a class="btn btn-default {% if category == 'projects' %}active{% endif %}" href="/search/?q={{ query }}&c=projects">Projects</a>
				<div class="btn-group">
					<a class="split-left btn btn-default {% if category in ['people', 'students', 'advisers'] %}active{% endif %}" href="/search/?q={{ query }}&c=people">People</a>
				    <a class="split-right btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>
					<ul class="dropdown-menu">
					    <li><a class="selected" href="/search/?q={{ query }}&c=students">Students</a></li>
					    <li><a href="/search/?q={{ query }}&c=advisers">Advisers</a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="body col-sm-9 col-sm-offset-1">
			{% for result in results %}
				<div class="row">
					<div class="col-lg-12">
						<div class="media">
						    <div class="media-left media-middle">
						        <a href="
									{% if category == 'projects' %}
					            		/project/{{ result._id }}/
					            	{% elif category in ['people', 'students', 'advisers'] %}
					            		/user/{{ result._id }}/
					            	{% endif %}
						        ">
						            <img class="media-object" src="
						            	{% if category == 'projects' %}
						            		{{ result.iconURL }}
						            	{% elif category in ['people', 'students', 'advisers'] %}
						            		{{ result.photo }}
						            	{% endif %}
						            " alt="
						            	{% if category == 'projects' %}
						            		{{ result.title }}
						            	{% elif category in ['people', 'students', 'advisers'] %}
						            		{{ result.fullName }}
						            	{% endif %}
						            " />
						        </a>
						    </div>
						    <div class="media-body">
						        <h4 class="media-heading">
					        		{% if category == 'projects' %}
					            		{{ result.title }}
					            	{% elif category in ['people', 'students', 'advisers'] %}
					            		{{ result.fullName }}
					            	{% endif %}
						        </h4>
						        <p>
					            	{% if category == 'projects' %}
					            		Team: {{ result.team|safe }}
					            	{% elif category in ['people', 'students', 'advisers'] %}
					            		Projects: {{ result.projects|safe }}
					            	{% endif %}
						        </p>
						    </div>
						</div>
					</div>
				</div>
				{% if not loop.last %}
					<hr>
				{% endif %}
			{% endfor %}
		</div>
	</div>
	<div class="row">
		<div class="col-md-6 col-md-offset-3 text-center">
			<nav>
			    <ul class="pagination">
			        <li class="{% if page_num <= 1 %}disabled{% endif %}">
			            <a {% if page_num > 1 %}href="/search/page/{{ page_num-1 }}/?q={{ query }}&c={{ category }}"{% endif %}>
			                <span>&laquo;</span>
			            </a>
			        </li>
			        {% for i in range(first_paginate, last_paginate+1) %}
			        	<li class="{% if i == page_num %}active{% endif %}"><a href="/search/page/{{ i }}/?q={{ query }}&c={{ category }}">{{ i }}</a></li>
			        {% endfor %}
			        <li class="{% if page_num == last_paginate %}disabled{% endif %}">
			            <a {% if page_num < last_paginate %}href="/search/page/{{ page_num+1 }}/?q={{ query }}&c={{ category }}"{% endif %}>
			                <span aria-hidden="true">&raquo;</span>
			            </a>
			        </li>
			    </ul>
			</nav>
		</div>
	</div>
</div>
{% endblock %}